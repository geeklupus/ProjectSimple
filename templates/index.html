<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>In Memoriam - Bocil Tercinta Mbak Angel</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            scroll-behavior: smooth;
        }

        body {
            background-color: #0a4a7a;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: linear-gradient(to bottom, #0a4a7a, #1e90ff);
            animation: fadeInBody 2s ease-in;
        }

        @keyframes fadeInBody {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .memorial-container {
            background-color: rgba(255, 255, 255, 0.95);
            width: 90%;
            max-width: 700px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 30px 20px;
            text-align: center;
            border: 1px solid #e0e0e0;
            margin: 20px;
        }

        h1 {
            color: #2c3e50;
            font-family: 'Playfair Display', serif;
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 10px;
            transition: all 0.6s ease-in-out;
        }

        .subtitle {
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 10px;
            font-size: 1.1em;
            animation: fadeInText 2s ease-in-out;
        }

        .dates {
            color: #e74c3c;
            font-size: 1.1em;
            margin: 15px 0;
            font-weight: 400;
            letter-spacing: 1px;
        }

        .memory-image {
            width: 220px;
            height: 220px;
            object-fit: cover;
            border-radius: 50%;
            margin: 20px auto;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border: 5px solid #f5f5f5;
            transition: transform 0.5s ease;
            display: block;
        }

        .memory-image:hover {
            transform: scale(1.05);
        }

        .message {
            color: #34495e;
            font-size: 1em;
            line-height: 1.6;
            margin: 20px 0;
            padding: 0 10px;
        }

        .poem {
            font-style: italic;
            color: #555;
            margin: 25px 0;
            line-height: 1.8;
            font-size: 1em;
        }

        .signature {
            font-family: 'Playfair Display', serif;
            font-size: 1.1em;
            margin-top: 25px;
            color: #2c3e50;
        }

        /* Music Control Styles */
        #musicControl {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255,255,255,0.8);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        #musicControl:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.9);
        }

        #musicIcon {
            font-size: 20px;
        }

        @keyframes fadeInText {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.6em; }
            .subtitle, .dates, .signature { font-size: 1em; }
            .message, .poem { font-size: 0.95em; line-height: 1.5; }
            .memory-image { width: 160px; height: 160px; }
            #musicControl { width: 40px; height: 40px; }
            #musicIcon { font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="memorial-container" data-aos="fade-up">
        <h1 data-aos="zoom-in">Selamat Jalan, Bocil Tercinta Mbak Angel</h1>
        <p class="subtitle" data-aos="fade-in" data-aos-delay="100">"Bintang Kecil yang Terlalu Cepat Pudar"</p>

        <img class="memory-image" src="{{ url_for('static', filename='images/foto_kenangan.jpg') }}" alt="Kenangan Indah" data-aos="zoom-in" data-aos-delay="200">

        <p class="dates" data-aos="fade-up" data-aos-delay="300">28 Desember 2024 - 17 April 2025</p>

        <div class="message" data-aos="fade-up" data-aos-delay="400">
            <p>Di antara bintang-bintang, ada satu yang bersinar paling terang walau hanya sesaat.</p>
            <p>Bocil kecil kami, engkau telah memberikan cahaya hangat yang takkan pernah kami lupa.</p>
            <p>Setiap tawa, setiap pandangan matamu yang penuh keajaiban, akan selamanya terukir dalam relung hati kami.</p>
        </div>

        <div class="poem" data-aos="fade-up" data-aos-delay="500">
            <p>"Bukan tentang berapa lama, tapi seberapa dalam cinta itu menyentuh"</p>
            <p>"Bukan tentang kepergianmu, tapi tentang keabadian kenangan yang kau tinggalkan"</p>
            <p>"Di taman kenangan, kau akan selalu menjadi bunga yang paling harum"</p>
        </div>

        <div class="message" data-aos="fade-up" data-aos-delay="600">
            <p>Terima kasih telah menjadi bagian terindah dalam hidup kami.</p>
            <p>Meski waktu bersama singkat, setiap detiknya adalah anugerah yang tak ternilai.</p>
            <p>Kau akan selalu menjadi bintang kecil kami yang bersinar terang di langit malam.</p>
        </div>

        <p class="signature" data-aos="fade-up" data-aos-delay="700">Dengan cinta abadi,<br>Mbak Angel dan Keluarga</p>
    </div>

    <!-- Audio Element with Fallback to YouTube -->
    <audio id="bgMusic" loop>
        <source src="{{ url_for('static', filename='music/ytmp3free.cc_rita-effendy-selamat-jalan-kekasih-i-lirik-lagu-senja-youtubemp3free.org.mp3') }}" type="audio/mpeg">
    </audio>

    <!-- YouTube Fallback (Hidden) -->
    <div style="display: none;">
        <iframe id="ytMusic" width="0" height="0"
            src="https://www.youtube.com/embed/S1OJQQ22rzQ?autoplay=1&mute=1&loop=1&playlist=S1OJQQ22rzQ&controls=0&enablejsapi=1"
            frameborder="0"
            allow="autoplay"
            allowfullscreen>
        </iframe>
    </div>

    <!-- Music Control Button -->
    <div id="musicControl">
        <span id="musicIcon">ðŸ”Š</span>
    </div>

    <!-- Script animasi AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS animations
        AOS.init({
            duration: 1200,
            easing: 'ease-in-out',
            once: true
        });

        // Scroll to top on load
        window.onload = () => {
            setTimeout(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 100);
        };

        // Music Player Functionality
        const bgMusic = document.getElementById('bgMusic');
        const musicControl = document.getElementById('musicControl');
        const musicIcon = document.getElementById('musicIcon');
        let isPlaying = false;

        // Try to play local audio first
        function startLocalMusic() {
            bgMusic.volume = 0.3;
            const promise = bgMusic.play();
            
            if (promise !== undefined) {
                promise.then(() => {
                    isPlaying = true;
                    musicIcon.textContent = 'ðŸ”Š';
                }).catch(error => {
                    // If local audio blocked, try YouTube
                    startYouTubeMusic();
                });
            }
        }

        // Fallback to YouTube if local audio blocked
        function startYouTubeMusic() {
            const ytPlayer = document.getElementById('ytMusic');
            ytPlayer.src += "&autoplay=1";
            isPlaying = true;
            musicIcon.textContent = 'ðŸ”Š';
        }

        // Music control toggle
        musicControl.addEventListener('click', () => {
            if (isPlaying) {
                bgMusic.pause();
                document.getElementById('ytMusic').src = document.getElementById('ytMusic').src.replace("&autoplay=1", "");
                musicIcon.textContent = 'ðŸ”‡';
            } else {
                bgMusic.play().catch(e => startYouTubeMusic());
                musicIcon.textContent = 'ðŸ”Š';
            }
            isPlaying = !isPlaying;
        });

        // Start music after 1 second
        setTimeout(startLocalMusic, 1000);

        // Check music status periodically
        setInterval(() => {
            if (isPlaying && bgMusic.paused && !document.getElementById('ytMusic').src.includes("autoplay=1")) {
                bgMusic.currentTime = 0;
                bgMusic.play().catch(e => console.log("Playback error"));
            }
        }, 30000);

        // Replay when ended (local audio)
        bgMusic.addEventListener('ended', () => {
            bgMusic.currentTime = 0;
            bgMusic.play();
        });
    </script>
</body>
</html>